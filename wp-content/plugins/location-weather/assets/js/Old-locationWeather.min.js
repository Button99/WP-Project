!function($){$.fn.locationWeather=function(options){if(!this.length)return this;const defaults={descriptionTarget:null,maxTemperatureTarget:null,minTemperatureTarget:null,windSpeedTarget:null,humidityTarget:null,sunriseTarget:null,sunsetTarget:null,placeTarget:null,iconTarget:null,customIcons:null,units:"c",city:null,lat:null,lng:null,key:null,weatherDate:null,lang:"en",success:function(){},error:function(message){}},plugin=this,el=$(this);this.settings={},this.settings=$.extend({},defaults,options);const s=this.settings;function dateConverter(t){var a=new Date(1e3*t),months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],year=a.getFullYear(),month=months[a.getMonth()],date;return a.getDate()+" "+month+", "+year}const formatTime=function(unixTimestamp){const milliseconds=1e3*unixTimestamp,date=new Date(milliseconds);let hours=date.getHours();if(hours>12){let hoursRemaining;hours=12-(24-hours)}let minutes=date.getMinutes(),time;return minutes=minutes.toString(),minutes.length<2&&(minutes=0+minutes),hours+":"+minutes};let apiURL="https://api.openweathermap.org/data/2.5/weather?lang="+s.lang,weatherObj,temperature,minTemperature,maxTemperature;null!=s.city?apiURL+="&q="+s.city:null!=s.lat&&null!=s.lng&&(apiURL+="&lat="+s.lat+"&lon="+s.lng),null!=s.key&&(apiURL+="&appid="+s.key),$.ajax({type:"GET",url:apiURL,dataType:"jsonp",success:function(data){if(data){if("f"==s.units?(temperature=Math.round(1.8*(data.main.temp-273.15)+32)+"°F",minTemperature=Math.round(1.8*(data.main.temp_min-273.15)+32)+"°F",maxTemperature=Math.round(1.8*(data.main.temp_max-273.15)+32)+"°F"):(temperature=Math.round(data.main.temp-273.15)+"°C",minTemperature=Math.round(data.main.temp_min-273.15)+"°C",maxTemperature=Math.round(data.main.temp_max-273.15)+"°C"),weatherObj={city:`${data.name}, ${data.sys.country}`,temperature:{current:temperature,min:minTemperature,max:maxTemperature,units:s.units.toUpperCase()},description:data.weather[0].description,windspeed:`${Math.round(data.wind.speed)} Mps`,humidity:`${data.main.humidity}%`,sunrise:`${formatTime(data.sys.sunrise)} AM`,sunset:`${formatTime(data.sys.sunset)} PM`},el.html(temperature),null!=s.minTemperatureTarget&&$(s.minTemperatureTarget).text(minTemperature),null!=s.maxTemperatureTarget&&$(s.maxTemperatureTarget).text(maxTemperature),$(s.descriptionTarget).text(weatherObj.description),$(s.weatherDate).text(dateConverter(data.dt)),null!=s.iconTarget&&null!=data.weather[0].icon){let iconURL;if(null!=s.customIcons){const defaultIconFileName=data.weather[0].icon;let timeOfDay,iconName;timeOfDay=-1!=defaultIconFileName.indexOf("d")?"day":"night","01d"!=defaultIconFileName&&"01n"!=defaultIconFileName||(iconName="clear"),"02d"!=defaultIconFileName&&"02n"!=defaultIconFileName&&"03d"!=defaultIconFileName&&"03n"!=defaultIconFileName&&"04d"!=defaultIconFileName&&"04n"!=defaultIconFileName||(iconName="clouds"),"09d"!=defaultIconFileName&&"09n"!=defaultIconFileName||(iconName="shower-rain"),"10d"!=defaultIconFileName&&"10n"!=defaultIconFileName||(iconName="rain"),"11d"!=defaultIconFileName&&"11n"!=defaultIconFileName||(iconName="storm"),"13d"!=defaultIconFileName&&"13n"!=defaultIconFileName||(iconName="snow"),"50d"!=defaultIconFileName&&"50n"!=defaultIconFileName||(iconName="mist"),iconURL=`${s.customIcons}${timeOfDay}/${iconName}.png`}else iconURL=`https://openweathermap.org/img/w/${data.weather[0].icon}.png`;$(s.iconTarget).attr("src",iconURL)}null!=s.placeTarget&&$(s.placeTarget).text(weatherObj.city),null!=s.windSpeedTarget&&$(s.windSpeedTarget).text(weatherObj.windspeed),null!=s.humidityTarget&&$(s.humidityTarget).text(weatherObj.humidity),null!=s.sunriseTarget&&$(s.sunriseTarget).text(weatherObj.sunrise),null!=s.sunsetTarget&&$(s.sunsetTarget).text(weatherObj.sunset),s.success.call(this,weatherObj)}},error:function(jqXHR,textStatus,errorThrown){s.error.call(this,{error:textStatus})}})}}(jQuery);